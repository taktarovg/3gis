# üõ†Ô∏è –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ 3GIS

**–î–∞—Ç–∞**: 30 –∏—é–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

### 1. ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏ –≤ –ë–î
- **–ü—Ä–æ–±–ª–µ–º–∞**: `telegram_chats.shareCount does not exist in the current database`
- **–ü—Ä–∏—á–∏–Ω–∞**: –í —Å—Ö–µ–º–µ Prisma –µ—Å—Ç—å –ø–æ–ª—è `shareCount`, –Ω–æ –∏—Ö –Ω–µ—Ç –≤ –ë–î
- **–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω `database_fix.sql` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ SQL –≥–æ—Ç–æ–≤ –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é

### 2. ‚ùå Event handlers –≤ Server Components  
- **–ü—Ä–æ–±–ª–µ–º–∞**: `Event handlers cannot be passed to Client Component props`
- **–ü—Ä–∏—á–∏–Ω–∞**: –í–æ–∑–º–æ–∂–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å —Ä–∞–∑–º–µ—Ç–∫–æ–π 'use client' 
- **–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤—Å–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–º–µ—á–µ–Ω—ã

### 3. üîÑ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã –ë–î
- **–ü—Ä–æ–±–ª–µ–º–∞**: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ missing –ø–æ–ª–µ–π
- **–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω—ã —É—Ç–∏–ª–∏—Ç—ã `sanitizeBusinessData` –∏ `sanitizeChatData`
- **–§–∞–π–ª—ã**: `src/lib/database-utils.ts`
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –°–æ–∑–¥–∞–Ω–æ –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ

### 4. üìù –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- **–§–∞–π–ª—ã**: 
  - `src/app/tg/business/[id]/page.tsx`
  - `src/app/tg/chats/[id]/page.tsx`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –¥–µ–ø–ª–æ—è:

### 1. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ë–î
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ SQL
psql "postgresql://..." < database_fix.sql

# –ò–ª–∏ —á–µ—Ä–µ–∑ Supabase Dashboard:
# 1. –ó–∞–π—Ç–∏ –≤ SQL Editor
# 2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ database_fix.sql
# 3. –í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Prisma –∫–ª–∏–µ–Ω—Ç–∞
```bash
cd D:\dev\3gis
npx prisma generate
npx prisma db push
```

### 3. –û—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞
```bash
rm -rf .next
npm run build
```

### 4. –î–µ–ø–ª–æ–π –≤ –ø—Ä–æ–¥–∞–∫—à–Ω
```bash
git add .
git commit -m "fix: –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –ë–î –∏ Server Components

- –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏ share_count
- –°–æ–∑–¥–∞–Ω—ã –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î  
- –û–±–Ω–æ–≤–ª–µ–Ω—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã business/[id] –∏ chats/[id]
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –ø–æ–ª—è–º–∏"

git push
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:

### –õ–æ–≥–∏ Vercel –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:
1. ‚úÖ –ò—Å—á–µ–∑–ª–∏ –æ—à–∏–±–∫–∏ `shareCount does not exist`
2. ‚úÖ –ò—Å—á–µ–∑–ª–∏ –æ—à–∏–±–∫–∏ `Event handlers cannot be passed`
3. ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü—ã business/[id] —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü—ã chats/[id] —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
1. –û—Ç–∫—Ä—ã—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –±–∏–∑–Ω–µ—Å–∞
2. –û—Ç–∫—Ä—ã—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–∞—Ç–∞
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –∫–Ω–æ–ø–æ–∫ –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã:
- –ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º - –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É
- –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ –ø–µ—Ä–≤—ã–µ 24 —á–∞—Å–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã –∏ –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ.
