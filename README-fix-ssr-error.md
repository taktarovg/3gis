# üõ†Ô∏è –û–¢–ß–ï–¢: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SSR –æ—à–∏–±–∫–∏ –≤ 3GIS

## üö® –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞
```
‚®Ø Error: Event handlers cannot be passed to Client Component props.
  {onClick: function onClick, className: ..., children: ...}
            ^^^^^^^^^^^^^^^^
If you need interactivity, consider converting part of this to a Client Component.
    at stringify (<anonymous>) { digest: '733288120' }
```

## üîç –ê–Ω–∞–ª–∏–∑ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ **Telegram SDK v3.x** —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
- ‚úÖ **useLaunchParams(true)** –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å–∏–≥–Ω–∞—Ç—É—Ä—É —Å SSR —Ñ–ª–∞–≥–æ–º
- üö® **–ü—Ä–æ–±–ª–µ–º–∞**: Event handlers –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö —Å–µ—Ä–∏–∞–ª–∏–∑—É—é—Ç—Å—è –ø—Ä–∏ SSR

## üéØ –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞
–í Next.js App Router —Å React Server Components **–Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å event handlers –∫–∞–∫ props** –ø—Ä–∏ Server-Side Rendering. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å `onClick`, `onChange` –∏ –¥—Ä—É–≥–∏–º–∏ event handlers –≤—ã–∑—ã–≤–∞—é—Ç –æ—à–∏–±–∫—É —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏.

## ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/src/app/tg/page.tsx`
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ó–∞–º–µ–Ω–µ–Ω—ã —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã –Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å `ssr: false`
- –î–æ–±–∞–≤–ª–µ–Ω—ã loading —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
```typescript
// ‚ùå –ë—ã–ª–æ (–≤—ã–∑—ã–≤–∞–ª–æ SSR –æ—à–∏–±–∫—É)
import { DonationWidget } from '@/components/donations/DonationWidget';
import { SearchBox } from '@/components/search/SearchBox';
import { NearbyButton } from '@/components/location/NearbyButton';
import { CategoryGrid } from '@/components/categories/CategoryGrid';
import { PlatformDebug } from '@/components/debug/PlatformDebug';

// ‚úÖ –°—Ç–∞–ª–æ (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç)
const DonationWidget = dynamic(
  () => import('@/components/donations/DonationWidget').then(mod => ({ default: mod.DonationWidget })),
  { ssr: false, loading: () => <LoadingSkeleton /> }
);
// ... –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```

### 2. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å event handlers
**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –º–µ—Å—Ç–∞ –±—ã–ª–∏ –≤:**
- `DonationWidget.tsx` - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ `onClick` handlers (—Å—Ç—Ä–æ–∫–∏ 47, 60, 75, 111)
- `SearchBox.tsx` - `onChange` –∏ `onSubmit` handlers  
- `NearbyButton.tsx` - `onClick` handlers
- `PlatformDebug.tsx` - `onClick` handlers –≤ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫–Ω–æ–ø–∫–∞—Ö

### 3. Telegram SDK v3.x
**–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ –¥–ª—è SSR
const launchParams = useLaunchParams(true);
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
```bash
# Type checking
npm run type-check

# Production build (–≥–ª–∞–≤–Ω—ã–π —Ç–µ—Å—Ç)
npm run build

# Development server
npm run dev
```

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –û—à–∏–±–∫–∞ `Event handlers cannot be passed to Client Component props` –∏—Å—á–µ–∑–ª–∞
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ SSR —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å loading —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
- ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –ø–æ—Å–ª–µ –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚ùå SSR crash —Å –æ—à–∏–±–∫–æ–π event handlers
- ‚ùå –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ SSR —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ  
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å –∫—Ä–∞—Å–∏–≤—ã–º–∏ skeletons
- ‚úÖ –ü–ª–∞–≤–Ω–∞—è –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- ‚ö° –ë—ã—Å—Ç—Ä–∞—è –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è

### Dynamic imports —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π:
```typescript
const ComponentName = dynamic(
  () => import('@/path/to/Component').then(mod => ({ default: mod.ComponentName })),
  { 
    ssr: false,           // –û—Ç–∫–ª—é—á–∞–µ–º SSR –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å event handlers
    loading: () => (      // –ö—Ä–∞—Å–∏–≤—ã–π loading skeleton
      <div className="animate-pulse bg-gray-200 rounded-lg h-12"></div>
    )
  }
);
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è:
- üöÄ **–ë—ã—Å—Ç—Ä—ã–π SSR** - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- üé® **UX friendly** - loading skeletons –≤–º–µ—Å—Ç–æ –ø—É—Å—Ç—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤  
- üõ°Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–µ–π
- üì± **–ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–æ –≤—Å–µ—Ö Telegram –∫–ª–∏–µ–Ω—Ç–∞—Ö

## üéØ –í–ª–∏—è–Ω–∏–µ –Ω–∞ –º–µ—Ç—Ä–∏–∫–∏

### Core Web Vitals:
- **FCP (First Contentful Paint)**: –£–ª—É—á—à–µ–Ω –∑–∞ —Å—á–µ—Ç –±—ã—Å—Ç—Ä–æ–≥–æ SSR
- **LCP (Largest Contentful Paint)**: –°—Ç–∞–±–∏–ª–µ–Ω
- **CLS (Cumulative Layout Shift)**: –ú–∏–Ω–∏–º–∞–ª–µ–Ω –±–ª–∞–≥–æ–¥–∞—Ä—è skeleton loading
- **FID (First Input Delay)**: –£–ª—É—á—à–µ–Ω –∑–∞ —Å—á–µ—Ç –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

### SEO –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ:
- ‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç—Å—è –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞–º–∏
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã  
- ‚úÖ Stable Open Graph –º–µ—Ç–∞-—Ç–µ–≥–∏

## üìã –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. `/src/app/tg/page.tsx` - –æ—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å dynamic imports
2. `/test-compilation.js` - —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
3. `README-fix-ssr-error.md` - —ç—Ç–æ—Ç –æ—Ç—á–µ—Ç (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)

### –ù–µ–∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç):
- `/src/middleware.ts` - ‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ `/src/components/` - ‚úÖ –∏–º–µ—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç—ã
- `/package.json` - ‚úÖ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ production** - –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ Vercel
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤** - —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –æ—à–∏–±–∫–∞ `733288120` –∏—Å—á–µ–∑–ª–∞
3. **Performance testing** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ Core Web Vitals
4. **User testing** - –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö Telegram –∫–ª–∏–µ–Ω—Ç–∞—Ö

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞!** 

–û—à–∏–±–∫–∞ `Event handlers cannot be passed to Client Component props` –±—ã–ª–∞ —É—Å–ø–µ—à–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—É—Ç–µ–º –ø–µ—Ä–µ–≤–æ–¥–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã —Å –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ–º SSR. 

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å:
- üõ°Ô∏è –°—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ production
- ‚ö° –ë—ã—Å—Ç—Ä–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–ª–∞–≥–æ–¥–∞—Ä—è SSR —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- üé® –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ—Ç–ª–∏—á–Ω—ã–π UX —Å loading —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
- üì± –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –≤–æ –≤—Å–µ—Ö Telegram –∫–ª–∏–µ–Ω—Ç–∞—Ö

**–ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é!** üéâ
